<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Marker : Bookmark your terminal commands.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Marker</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/pindexis/marker">View on GitHub</a>

          <h1 id="project_title">Marker</h1>
          <h2 id="project_tagline">Bookmark your terminal commands.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/pindexis/marker/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/pindexis/marker/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="marker" class="anchor" href="#marker" aria-hidden="true"><span class="octicon octicon-link"></span></a>marker</h1>

<p>Do you heavily use Ctrl+R(search through history) to search for commands that you frequently use?<br>
Marker lets you easily bookmark these commands and quickly retrieve them without going through Shell Aliases/Functions/Multiple Ctrl-R...<br>
It offers the following features:</p>

<ul>
<li>A UI selector that lets you easily select the desired command if more than one command is matched.</li>
<li>Fuzzy matching (rather than Ctrl-R exact match).</li>
<li>Aliases: <code>listen port</code> can magically be transformed into <code>sudo netstat -nlp | grep</code>.</li>
<li>Command templates: Marker lets you bookmark commands with place-holders and easily place the cursor at those place-holders.</li>
</ul>

<p><img src="https://cloud.githubusercontent.com/assets/2557967/7770230/184f4d8a-0084-11e5-8e03-2402cbe634aa.gif" alt="command-template"></p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Simplicity is key, Three keyboard shortcuts let you take most of Marker:</p>

<ul>
<li>
<code>Ctrl-k</code>: Mark the current written string in the command line.</li>
<li>
<code>Ctrl-Space</code>: search for commands that match the current written string.</li>
<li>
<code>Ctrl-t</code>: place the cursor at the next placeholder, identified by the '%%' word</li>
<li>
<code>marker remove</code>: remove a bookmark</li>
</ul>

<p><a href="http://youtu.be/JuBY9sbzjdU"><img src="https://cloud.githubusercontent.com/assets/2557967/7701147/3078969c-fe1c-11e4-9837-a2e586fbe07e.png" alt="ScreenShot"></a></p>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>python (2.7+ or 3.0+)</li>
<li>Bash or Zshell (didn't tested on other shells).</li>
<li>if you're using Bash, Readline should be in Emacs mode(It is by default)</li>
<li>Linux Or OSX</li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<ul>
<li>
<code>cd /usr/local</code> or wherever you want to install Marker</li>
<li><code>git clone git@github.com:pindexis/marker.git</code></li>
<li><code>cd marker</code></li>
<li><code>./install.py</code></li>
</ul>

<h2>
<a id="how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><span class="octicon octicon-link"></span></a>How It Works:</h2>

<p>Marker is a composed of shell script, and a python tool:<br>
  The shell code acts as a wrapper around that python tool, it's responsible for managing the user input in the command-line(adding/removing text, moving the cursor around etc...).<br>
  The python utility in the other hand(called marker) contains the app logic. It manages the bookmarked data, do the matching, and present a UI selector if it's called in interactive mode. It doesn't depend on the Shell script, so it can be called separately as a command line utility(<code>marker --help</code>)</p>

<p>The communication between the shell script and the python commandline tool is done via a temporary file. For example, here's how things work when Ctrl+space is pressed:</p>

<ul>
<li>A shell code executes, calling 'marker' tool in non-interactive mode(without displaying UI selector) passing as argument the written string in the commandline and a file path where the matched commands will be stored. The python tool will then determine the commands that match the given string and stores them in the file that was passed as an argument.</li>
<li>The shell script will then parse that file. if there is only one command there, It will replace the current string written on the command-line by that command. If there is more than one command returned, It calls the python tool again in Interactive mode, where a UI selector will be shown that allows the user to select the desired command. The user selected command will be stored in the file passed as an argument and displayed in the command-line. (The reason of this approach is to avoid creating a new command-line prompt when there is only one match, but rather work on current prompt).</li>
</ul>

<p>You can take a look at <code>bin/marker.sh</code> for more details. Most magic happens there.</p>

<h3>
<a id="limitation-with-bash-and-shells-that-use-readline" class="anchor" href="#limitation-with-bash-and-shells-that-use-readline" aria-hidden="true"><span class="octicon octicon-link"></span></a>Limitation with Bash (and shells that use Readline):</h3>

<p>Bash uses an external library(Readline) to process the user input in the command-line(including keyboard bindings). This separation makes it hard to script and extend the command-line when certain keys are pressed. For example, It's not possible to invoke shell functions intuitively when a user press a keyboard shortcut and manipulate the command-line from those functions(in contrast with zshell where the input processor zle is integrated within the shell).  </p>

<p>A couple of hacks were made to make Marker work with Bash, notably triggering shell-expand-line to evaluate a shell function with the current written string as an argument. This shell function will then executes some logic and dynamically bind a certain sequence of characters to a temporary keyboard shortcut which will be executed finally by the original shortcut(ie <code>ctrl-Space</code>)(<code>bin/marker.sh</code> contains more details).  </p>

<p>Sadly, hacks come with a cost: It's not possible to use the keyboard shortcuts <code>Ctrl-k</code> and <code>Ctrl-t</code> with commands that contain single quotes (<code>'</code>) because single quotes are used to enclose the user input. So you probably should use double quotes with escaping instead(see <a href="http://stackoverflow.com/questions/6697753/difference-between-single-and-double-quotes-in-bash%20for%20difference%20between%20single%20and%20double%20quotes">here</a> for difference between single and double quotes)</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p><a href="LICENSE">MIT</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Marker maintained by <a href="https://github.com/pindexis">pindexis</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
